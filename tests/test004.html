<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Phaser Micro</title>
    <script src="../src/Game.js"></script>
    <script src="../src/WebGL.js"></script>
    <script src="../src/Canvas.js"></script>
    <script src="../src/Loader.js"></script>
    <script src="../src/Cache.js"></script>
    <script src="../src/Texture.js"></script>
    <script src="../src/Sprite.js"></script>
    <script src="../src/Matrix.js"></script>
    <script src="../src/Geometry.js"></script>
    <script src="../src/Group.js"></script>
</head>
<body>

<script type="text/javascript">

    var game = new PhaserMicro.Game(800, 600, 'canvas', '', { preload: preload, create: create, update: update });

    function preload () {

        game.pixelArt = true;

        game.load.image('sky', 'assets/sky2.png');
        game.load.image('ship', 'assets/bsquadron3.png');

    }

    var ships;

    function create() {

        game.addChild(0, 0, 'sky');

        ships = new PhaserMicro.Group(game);

        var sprite;

        for (var i = 0; i < 100; i++)
        {
            var x = Math.random() * game.width;
            var y = Math.random() * game.height;
            sprite = game.addChild(x, y, 'ship');
            sprite.rotation = 45 * PhaserMicro.DEG_TO_RAD;
            sprite.scale.x = 2;
            sprite.scale.y = 2;
            ships.add(sprite);
        }

        console.log(ships);

    }

    function update() {

        ships.forEach(move, this);

    }

    function move(ship) {

        ship.x -= 2;
        ship.y += 2;

        if (ship.x < -64)
        {
            ship.x = 864;
        }

        if (ship.y > 600)
        {
            ship.y = -64;
        }

    }

</script>

</body>
</html>